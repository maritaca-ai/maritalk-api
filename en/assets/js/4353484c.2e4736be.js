"use strict";(self.webpackChunkmaritaca=self.webpackChunkmaritaca||[]).push([[9119],{2463:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var t=s(4848),o=s(8453);const a={id:"files",title:"Upload de Arquivos"},r=void 0,i={id:"pt/files",title:"Upload de Arquivos",description:"Nossa API permite o envio de arquivos diretamente pelo endpoint de Chat Completions.",source:"@site/docs/pt/files_in_completions_api_pt.md",sourceDirName:"pt",slug:"/pt/files",permalink:"/en/pt/files",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"files",title:"Upload de Arquivos"},sidebar:"sidebarPt",previous:{title:"Batch API",permalink:"/en/pt/batch-api"},next:{title:"LangChain",permalink:"/en/pt/examples/langchain"}},d={},l=[{value:"Extraction effort",id:"extraction-effort",level:2},{value:"N\xedveis de extra\xe7\xe3o dispon\xedveis",id:"n\xedveis-de-extra\xe7\xe3o-dispon\xedveis",level:3},{value:"Exemplo de uso",id:"exemplo-de-uso",level:3},{value:"Considera\xe7\xf5es Importantes",id:"considera\xe7\xf5es-importantes",level:2},{value:"Outros exemplos",id:"outros-exemplos",level:2},{value:"M\xfatiplos documentos de diferentes tipos",id:"m\xfatiplos-documentos-de-diferentes-tipos",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Nossa API permite o envio de arquivos diretamente pelo endpoint de Chat Completions.\nAtualmente, os arquivos devem ser enviados ",(0,t.jsx)(n.strong,{children:"em formato Base64"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Abaixo est\xe1 um exemplo de como enviar um PDF para a API:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import base64\nimport openai\n\nclient = openai.OpenAI(\n    api_key="YOUR_KEY",\n    base_url="https://chat.maritaca.ai/api",\n)\n\nwith open("my_research_proposal.pdf", "rb") as f:\n    file_content = f.read()\n    file_content_base64 = base64.b64encode(file_content).decode("utf-8")\n\nmessages = [\n    {\n        "role": "user",\n        "content": [\n            {\n                "type": "file",\n                "file": {\n                    "filename": "my_research.pdf",\n                    "file_data": f"data:application/pdf;base64,{file_content_base64}",\n                },\n            },\n            {\n                "type": "text",\n                "text": "Qual \xe9 o t\xedtulo da pesquisa proposta aqui?",\n            },\n        ],\n    }\n]\n\nresponse = client.chat.completions.create(\n    model="sabia-3.1",\n    messages=messages,\n)\n'})}),"\n",(0,t.jsx)(n.p,{children:"Quando arquivos s\xe3o enviados, a API extrai o conte\xfado textual e o repassa ao modelo.\nTodo o conte\xfado extra\xeddo \xe9 retornado na resposta e pode ser acessado assim:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'extracted_docs = response.extracted_content\n\nfor doc in extracted_docs:\n    print(doc["filename"])  # Nome do arquivo\n    print(doc["text"])      # Texto extra\xeddo\n'})}),"\n",(0,t.jsx)(n.p,{children:"Atualmente, suportamos os seguintes tipos de arquivo:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"PDF"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"DOCX"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"TXT"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"CSV"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"XML"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"XLSX"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"MD"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"extraction-effort",children:"Extraction effort"}),"\n",(0,t.jsxs)(n.p,{children:["Para ",(0,t.jsx)(n.strong,{children:"arquivos PDF"}),", voc\xea pode especificar o n\xedvel de esfor\xe7o da extra\xe7\xe3o.\nEsse par\xe2metro ",(0,t.jsx)(n.strong,{children:"n\xe3o afeta outros tipos de arquivo"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Se n\xe3o for especificado, o n\xedvel padr\xe3o \xe9 ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"medium"})}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"n\xedveis-de-extra\xe7\xe3o-dispon\xedveis",children:"N\xedveis de extra\xe7\xe3o dispon\xedveis"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"N\xedvel"}),(0,t.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,t.jsx)(n.th,{children:"Custo por p\xe1gina do PDF"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"medium"})}),(0,t.jsx)(n.td,{children:"Extra\xe7\xe3o intermedi\xe1ria; ideal para a maioria dos PDFs."}),(0,t.jsx)(n.td,{children:"R$ 0,02"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"advanced"})}),(0,t.jsx)(n.td,{children:"Extra\xe7\xe3o avan\xe7ada; melhor para PDFs complexos e com f\xf3rmulas."}),(0,t.jsx)(n.td,{children:"R$ 0,045"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Voc\xea pode consultar os pre\xe7os de extra\xe7\xe3o na nossa ",(0,t.jsx)(n.a,{href:"https://plataforma.maritaca.ai/modelos",children:"plataforma"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"exemplo-de-uso",children:"Exemplo de uso"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = client.chat.completions.create(\n    model="sabia-3.1",\n    messages=messages,\n    extra_body={\n        "extraction_effort": "medium"\n    },\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["O campo ",(0,t.jsx)(n.code,{children:"usage"})," retorna tanto os tokens consumidos quanto o n\xfamero de p\xe1ginas extra\xeddas:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'usage = response.usage\nprint(usage)\n\n# CompletionUsage(\n#     completion_tokens=167,\n#     prompt_tokens=45,\n#     total_tokens=212,\n#     extraction_details={\n#         "medium_effort_pages_extracted": 1,\n#         "advanced_effort_pages_extracted": 0,\n#     },\n# )\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"considera\xe7\xf5es-importantes",children:"Considera\xe7\xf5es Importantes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"A API n\xe3o armazena o texto extra\xeddo."}),"\nSe voc\xea pretende fazer v\xe1rias perguntas sobre o mesmo arquivo, salve o texto retornado \u2014 caso contr\xe1rio, uma nova extra\xe7\xe3o ser\xe1 feita (e cobrada no caso de PDFs com n\xedvel medium/advanced)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"O tamanho total dos arquivos enviados em uma mesma requisi\xe7\xe3o deve ser inferior a 50 MB."})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["PDFs processados com ",(0,t.jsx)(n.code,{children:"medium"})," ou ",(0,t.jsx)(n.code,{children:"advanced"})," geram cobran\xe7a por extra\xe7\xe3o"]}),", al\xe9m dos tokens usados na requisi\xe7\xe3o."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Descontos"})," Descontos para hor\xe1rio fora de pico e batch API s\xe3o aplicados apenas aos tokens de entrada e sa\xedda. ",(0,t.jsx)(n.em,{children:"Esses descontos n\xe3o se aplicam ao custo da extra\xe7\xe3o"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"outros-exemplos",children:"Outros exemplos"}),"\n",(0,t.jsx)(n.h3,{id:"m\xfatiplos-documentos-de-diferentes-tipos",children:"M\xfatiplos documentos de diferentes tipos"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'xml_path = "test.xml"\ncsv_path = "test.csv"\npdf_path = "test.pdf"\n\nwith open(xml_path, "rb") as xml_file:\n    xml_content = xml_file.read()\n    xml_content = base64.b64encode(xml_content).decode("utf-8")\n\nwith open(csv_path, "rb") as csv_file:\n    csv_content = csv_file.read()\n    csv_content = base64.b64encode(csv_content).decode("utf-8")\n\nwith open(pdf_path, "rb") as pdf_file:\n    pdf_content = pdf_file.read()\n    pdf_content = base64.b64encode(pdf_content).decode("utf-8")\n\ncsv_segment = {\n    "type": "file",\n    "file": {\n        "filename": "test.csv",\n        "file_data": f"data:text/csv;base64,{csv_content}",\n    },\n}\n\nxml_segment = {\n    "type": "file",\n    "file": {\n        "filename": "test.xml",\n        "file_data": f"data:application/xml;base64,{xml_content}",\n    },\n}\n\npdf_segment = {\n    "type": "file",\n    "file": {\n        "filename": "test.pdf",\n        "file_data": f"data:application/pdf;base64,{pdf_content}",\n    },\n}\n\nmessages = [\n    {\n        "role": "system",\n        "content": "You are a helpful assistant that can extract information from files",\n    },\n    {\n        "role": "user",\n        "content": [\n            csv_segment,\n            xml_segment,\n            pdf_segment,\n            {"type": "text", "text": "What is the content of each of these files?"},\n        ],\n    },\n]\n\nr = client.chat.completions.create(\n    model=model_name,\n    messages=messages,\n    max_tokens=30,\n    extra_body={\n        "extraction_effort": "medium",\n    },\n)\n\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const o={},a=t.createContext(o);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);